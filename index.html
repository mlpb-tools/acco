<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MLPB ‚Äì R√©pertoire interactif (PACEA ‚Ä¢ CEJ ‚Ä¢ CEP 2.0 ‚Ä¢ Posture ‚Ä¢ Entretien ‚Ä¢ APS ‚Ä¢ Alliance ‚Ä¢ Synth√®se)</title>
  <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --orange:#f39200; --vert:#95c11f; --bleu:#2897d5; --rose:#d60b52; --noir:#171718;
      --bg:#f6f7f8; --card:#ffffff; --muted:#6b7280; --line:#e5e7eb;
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{margin:0}
    body{
      font-family:Mulish,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:linear-gradient(135deg,#f4f4f4 0%,#e8e8e8 100%);
      color:#222;
    }
    header{
      position:sticky; top:0; z-index:50; background:#fff; border-bottom:1px solid var(--line);
    }
    .bar{
      max-width:1200px; margin:auto; padding:1rem; display:flex; gap:.75rem; align-items:center; flex-wrap:wrap;
    }
    .brand{font-weight:800; letter-spacing:.2px; color:var(--noir)}
    .tag{font-size:.8rem; background:#00000008; padding:.25rem .5rem; border-radius:999px}
    .tabs{display:flex; gap:.5rem; flex-wrap:wrap; margin-left:auto}
    .tab{
      border:1px solid var(--line); background:#fff; color:#333; padding:.55rem .8rem; border-radius:10px;
      font-weight:700; font-size:.9rem; cursor:pointer; transition:.2s ease; user-select:none;
    }
    .tab:hover{transform:translateY(-1px); border-color:#dcdcdc}
    .tab.active{color:#fff; background:linear-gradient(135deg,var(--bleu),var(--orange)); border-color:transparent}
    main{max-width:1100px; margin:2rem auto; padding:0 1rem 4rem}
    .card{
      background:var(--card); border-radius:var(--radius); box-shadow:0 10px 30px rgba(0,0,0,.06);
      padding:1.2rem; margin-bottom:1rem; border:1px solid var(--line);
    }
    h1{font-size:1.9rem; margin:.2rem 0 1rem; background:linear-gradient(135deg,var(--orange),var(--rose));
       -webkit-background-clip:text; -webkit-text-fill-color:transparent; font-weight:800}
    h2{font-size:1.25rem; margin:.2rem 0 1rem; color:var(--noir)}
    p.lead{color:#444; margin-top:0}
    .grid{display:grid; gap:1rem}
    @media(min-width:900px){ .grid.cols-2{grid-template-columns:1fr 1fr} .grid.cols-3{grid-template-columns:repeat(3,1fr)} }
    label{font-weight:700; font-size:.95rem; color:#374151}
    input[type="text"], input[type="date"], input[type="number"], textarea, select{
      width:100%; padding:.75rem .9rem; border:2px solid #e5e7eb; border-radius:10px; font:inherit; background:#fff;
      transition:.15s; color:#111;
    }
    textarea{min-height:120px; resize:vertical}
    input:focus, textarea:focus, select:focus{outline:none; border-color:var(--bleu); box-shadow:0 0 0 3px #2897d515}
    .hint{font-size:.85rem; color:var(--muted)}
    .pill{display:inline-block; padding:.35rem .65rem; border-radius:999px; background:#00000008; font-size:.8rem; font-weight:700; color:#374151}
    .actions{display:flex; gap:.5rem; flex-wrap:wrap}
    .btn{
      border:none; border-radius:10px; padding:.7rem 1rem; font-weight:800; cursor:pointer; transition:.2s; font-size:.95rem;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn-save{background:var(--orange); color:#fff}
    .btn-reset{background:#fff; color:#333; border:2px solid #e5e7eb}
    .btn-export{background:var(--bleu); color:#fff}
    .btn-print{background:var(--vert); color:#fff}
    .badge{font-size:.75rem; font-weight:800; color:#fff; padding:.2rem .5rem; border-radius:6px}
    .b-orange{background:var(--orange)} .b-bleu{background:var(--bleu)} .b-vert{background:var(--vert)} .b-rose{background:var(--rose)}
    .kv{display:grid; grid-template-columns:220px 1fr; gap:.75rem; align-items:center}
    .kv .k{font-weight:800; color:#374151}
    footer{
      border-top:1px solid var(--line); background:#fff; padding:1rem; color:#555; text-align:center;
    }
    .links{display:flex; gap:.75rem; flex-wrap:wrap; justify-content:center}
    .link{font-weight:800; color:var(--bleu); text-decoration:none}
    /* print */
    @media print{
      header,.actions,footer,.tabs{display:none !important}
      body{background:#fff}
      main{margin:0; padding:0}
      .card{box-shadow:none; border-color:#ddd}
    }
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="brand">MLPB ‚Ä¢ R√©pertoire Interactif</div>
      <div class="tag">PACEA</div><div class="tag">CEJ</div><div class="tag">CEP 2.0</div>
      <nav class="tabs" id="tabs"></nav>
    </div>
  </header>

  <main>
    <section class="card">
      <h1>R√©pertoire d‚Äôaccompagnement ‚Äì Mission Locale Pays Basque</h1>
      <p class="lead">Fiches interactives pr√™tes √† l‚Äôemploi : <b>PACEA</b>, <b>CEJ</b>, <b>CEP 2.0</b>, <b>Posture ‚Äì Tenir Conseil</b>, <b>Guide d‚Äôentretien</b>, <b>APS</b>, <b>Carte d‚Äôalliance</b>, <b>Synth√®se CEP</b>. Donn√©es sauvegard√©es automatiquement dans votre navigateur (localStorage).</p>
      <div class="actions">
        <button class="btn btn-save" onclick="saveAll()">üíæ Sauver tout</button>
        <button class="btn btn-export" onclick="exportAll()">üì§ Exporter (.json)</button>
        <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è Imprimer / PDF</button>
        <button class="btn btn-reset" onclick="resetCurrent()">‚ôªÔ∏è R√©initialiser la fiche courante</button>
      </div>
    </section>

    <div id="view"></div>
  </main>

  <footer>
    <div class="links">
      <a class="link" href="https://mlpb-tools.github.io/cep2.0/" target="_blank">CEP 2.0</a>
      <a class="link" href="https://mlpb-tools.github.io/regards_croises/" target="_blank">Regards crois√©s</a>
    </div>
    <div style="margin-top:.35rem; font-size:.85rem; color:#777">¬© 2025 Mission Locale Pays Basque ‚Äî Design CEP 2.0</div>
  </footer>

  <script>
    /* ========= Mod√®le de donn√©es par fiche ========= */
    const PAGES = [
      { id:'pacea',  label:'PACEA',  color:'b-vert',  render: renderPACEA },
      { id:'cej',    label:'CEJ',    color:'b-bleu',  render: renderCEJ },
      { id:'cep',    label:'CEP 2.0',color:'b-orange',render: renderCEP },
      { id:'posture',label:'Posture',color:'b-rose',  render: renderPosture },
      { id:'entretien',label:'Entretien',color:'b-bleu', render: renderEntretien },
      { id:'aps',    label:'APS',    color:'b-vert',  render: renderAPS },
      { id:'alliance',label:'Alliance',color:'b-orange', render: renderAlliance },
      { id:'synthese',label:'Synth√®se CEP',color:'b-rose', render: renderSynthese }
    ];

    const STATE_KEY = 'mlpb_repo_state_v1';
    let state = loadState();

    function loadState(){
      try{
        const raw = localStorage.getItem(STATE_KEY);
        return raw ? JSON.parse(raw) : {};
      }catch(e){ return {}; }
    }
    function saveState(){ localStorage.setItem(STATE_KEY, JSON.stringify(state)); }
    function val(path, def=''){
      const [page,key] = path.split(':');
      return (state[page] && state[page][key]!==undefined) ? state[page][key] : def;
    }
    function setVal(path, v){
      const [page,key] = path.split(':');
      state[page] = state[page] || {};
      state[page][key] = v;
      saveState();
    }

    function inputText(path, label, placeholder='', large=false){
      return `
        <div class="card">
          <label>${label}</label>
          <input type="text" placeholder="${placeholder}" value="${escapeHtml(val(path))}"
                 oninput="setVal('${path}', this.value)">
        </div>`;
    }
    function textarea(path, label, placeholder=''){
      return `
        <div class="card">
          <label>${label}</label>
          <textarea placeholder="${placeholder}" oninput="setVal('${path}', this.value)">${escapeHtml(val(path))}</textarea>
        </div>`;
    }
    function checkbox(path, label){
      const checked = val(path) ? 'checked' : '';
      return `
        <label style="display:flex; gap:.5rem; align-items:center; font-weight:700;">
          <input type="checkbox" ${checked} onchange="setVal('${path}', this.checked)"/>
          ${label}
        </label>`;
    }
    function threeCols(a,b,c){
      return `<div class="grid cols-3">${a}${b}${c}</div>`;
    }
    function twoCols(a,b){
      return `<div class="grid cols-2">${a}${b}</div>`;
    }
    function sectionTitle(txt, badgeClass='b-bleu'){
      return `<div class="card"><span class="badge ${badgeClass}">${txt}</span></div>`;
    }
    function actionsFooter(id){
      return `
        <div class="card" style="display:flex; gap:.5rem; flex-wrap:wrap;">
          <button class="btn btn-save" onclick="saveAll()">üíæ Sauver</button>
          <button class="btn btn-export" onclick="exportCurrent('${id}')">üì§ Exporter cette fiche</button>
          <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è PDF</button>
          <button class="btn btn-reset" onclick="resetCurrent()">‚ôªÔ∏è R√©initialiser</button>
        </div>`;
    }
    function escapeHtml(s){ return (s||'').replace(/[&<>"]/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m])); }

    /* ========= Renders ========= */

    function renderPACEA(){
      const id = 'pacea';
      return `
        <section class="card">
          <h2>PACEA ‚Äì Parcours contractualis√© d‚Äôaccompagnement vers l‚Äôemploi et l‚Äôautonomie</h2>
          <p class="hint">Objectifs : autonomie, insertion, confiance ‚Ä¢ √âtapes : entr√©e ‚Üí contrat ‚Üí suivi ‚Üí sortie.</p>
        </section>

        ${sectionTitle('Objectifs & contexte','b-vert')}
        ${twoCols(
          textarea('pacea:obj','Objectifs du parcours','Autonomie, insertion durable, confiance‚Ä¶'),
          textarea('pacea:public','Public / Situation initiale','Profil, besoins prioritaires, contexte social‚Ä¶')
        )}

        ${sectionTitle('Contractualisation & suivi','b-bleu')}
        ${threeCols(
          inputText('pacea:date_entree','Date d‚Äôentr√©e'),
          inputText('pacea:modalite','Modalit√© de contact','Pr√©sentiel / Distanciel / T√©l√©phone'),
          inputText('pacea:rythme','Rythme de suivi','Ex: 1 RDV / mois')
        )}
        ${twoCols(
          textarea('pacea:plan','Plan d‚Äôaction','Actions, acteurs, √©ch√©ances‚Ä¶'),
          textarea('pacea:indicateurs','Indicateurs de r√©ussite','Progression autonomie, confiance, assiduit√©‚Ä¶')
        )}

        ${sectionTitle('Synth√®se / points d‚Äôattention','b-rose')}
        ${textarea('pacea:synthese','Bilan et points d‚Äôattention','Ce qui marche / √† ajuster / relais √† activer‚Ä¶')}

        ${actionsFooter(id)}
      `;
    }

    function renderCEJ(){
      const id = 'cej';
      return `
        <section class="card">
          <h2>CEJ ‚Äì Contrat d‚ÄôEngagement Jeune (accompagnement intensif)</h2>
          <p class="hint">Engagement r√©ciproque ‚Äì diagnostic ‚Üí plan d‚Äôaction ‚Üí accompagnement ‚Üí bilan.</p>
        </section>

        ${sectionTitle('Engagements','b-bleu')}
        <div class="card">
          ${checkbox('cej:eng_jeune','Jeune : assiduit√©, participation active, respect du cadre')}
          <br/>
          ${checkbox('cej:eng_ml','Mission Locale : disponibilit√©, appui m√©thodologique, orientation ‚Äúsans couture‚Äù')}
        </div>

        ${sectionTitle('Diagnostic & plan','b-vert')}
        ${twoCols(
          textarea('cej:diag','Diagnostic partag√©','Besoins, freins, ressources, priorit√©s‚Ä¶'),
          textarea('cej:plan','Plan d‚Äôaction','Formations, ateliers, immersions, accompagnements sp√©cialis√©s‚Ä¶')
        )}

        ${sectionTitle('Suivi & indicateurs','b-orange')}
        ${threeCols(
          inputText('cej:rythme','Rythme d‚Äôaccompagnement','Ex: 2 RDV / mois'),
          inputText('cej:assiduite','Assiduit√© (%)',''),
          inputText('cej:progression','Progression per√ßue (1‚Äì5)','')
        )}
        ${textarea('cej:observations','Observations / ajustements','Relances, ajustements, alertes‚Ä¶')}

        ${actionsFooter(id)}
      `;
    }

    function renderCEP(){
      const id = 'cep';
      return `
        <section class="card">
          <h2>CEP 2.0 ‚Äì Conseil en √âvolution Professionnelle</h2>
          <p class="hint">2 niveaux de service : 1) Accueil individualis√© 2) Accompagnement personnalis√© ‚Ä¢ Posture ‚ÄúTenir Conseil‚Äù.</p>
        </section>

        ${sectionTitle('Niveau 1 ‚Äì Accueil','b-orange')}
        ${twoCols(
          textarea('cep:accueil_demande','Demande initiale','Information, orientation, emploi, formation, sant√©, logement, mobilit√©‚Ä¶'),
          textarea('cep:accueil_outils','Outils mobilis√©s','Infos droits, dispositifs, orientation interne/externe‚Ä¶')
        )}

        ${sectionTitle('Niveau 2 ‚Äì Accompagnement','b-bleu')}
        ${twoCols(
          textarea('cep:diag','Diagnostic partag√©','Vie pro/perso, sant√© mentale, mobilit√©, freins / leviers‚Ä¶'),
          textarea('cep:plan','Plan d‚Äôaction','Objectifs CT/MT, actions, acteurs, √©ch√©ances‚Ä¶')
        )}
        ${threeCols(
          inputText('cep:rythme','Rythme de suivi','‚â• 1 RDV/mois'),
          inputText('cep:suivi_outils','Tra√ßabilit√©','Tableau de bord CEP 2.0 / PAVAMI‚Ä¶'),
          inputText('cep:eval','√âvaluation qualitative','Autonomie, confiance, mobilit√© (1‚Äì5)')
        )}

        ${sectionTitle('Sortie / droit au retour','b-rose')}
        ${twoCols(
          textarea('cep:bilan','Bilan de parcours','Atteinte objectifs, progression qualitative‚Ä¶'),
          textarea('cep:relais','Relais / perspectives','Emploi, formation, sant√©, mobilit√©, engagement‚Ä¶')
        )}

        ${actionsFooter(id)}
      `;
    }

    function renderPosture(){
      const id = 'posture';
      return `
        <section class="card">
          <h2>Posture professionnelle ‚Äì ‚ÄúTenir Conseil‚Äù</h2>
          <p class="hint">Penser et d√©cider <b>avec</b>, non <b>pour</b> : neutralit√©, d√©lib√©ration, alliance, co-analyse, temporalit√© adapt√©e.</p>
        </section>

        ${sectionTitle('Auto-√©valuation (1‚Äì5)','b-bleu')}
        ${threeCols(
          inputText('posture:neutralite','Neutralit√© bienveillante (1‚Äì5)',''),
          inputText('posture:deliberation','Posture d√©lib√©rative (1‚Äì5)',''),
          inputText('posture:alliance','Alliance √©thique (1‚Äì5)','')
        )}
        ${twoCols(
          inputText('posture:coanalyse','Co-analyse (1‚Äì5)',''),
          inputText('posture:temps','Temporalit√© adapt√©e (1‚Äì5)','')
        )}

        ${sectionTitle('Notes / pistes de progression','b-vert')}
        ${textarea('posture:notes','Observations et ajustements','Formulations √† privil√©gier, pi√®ges √† √©viter, feed-back‚Ä¶')}

        ${actionsFooter(id)}
      `;
    }

    function renderEntretien(){
      const id = 'entretien';
      return `
        <section class="card">
          <h2>Guide d‚Äôentretien structur√© ‚Äì Tenir Conseil</h2>
          <p class="hint">5 √©tapes : Accueil & cadre ‚Ä¢ Exploration ‚Ä¢ Analyse partag√©e ‚Ä¢ Co-d√©finition du projet ‚Ä¢ Synth√®se & projection.</p>
        </section>

        ${sectionTitle('√âtapes & questions-cl√©s','b-bleu')}
        ${textarea('entretien:accueil','1) Accueil & cadre ‚Äì objectifs / cadre / alliance','')}
        ${textarea('entretien:exploration','2) Exploration du v√©cu ‚Äì besoins / situations / attentes','')}
        ${textarea('entretien:analyse','3) Analyse partag√©e ‚Äì freins / leviers / hypoth√®ses d‚Äôaction','')}
        ${textarea('entretien:codef','4) Co-d√©finition du projet ‚Äì priorit√©s / planification','')}
        ${textarea('entretien:synthese','5) Synth√®se & projection ‚Äì engagements / prochaines √©tapes','')}

        ${actionsFooter(id)}
      `;
    }

    function renderAPS(){
      const id = 'aps';
      return `
        <section class="card">
          <h2>Grille APS ‚Äì Analyse Partag√©e de Situation</h2>
          <p class="hint">5 colonnes : Projet & sens ‚Ä¢ Comp√©tences & ressources ‚Ä¢ Freins & vuln√©rabilit√©s ‚Ä¢ Environnement & r√©seau ‚Ä¢ Mobilit√© & territoire.</p>
        </section>

        <div class="card">
          <div class="grid cols-3">
            ${textarea('aps:projet','üéØ Projet & sens','')}
            ${textarea('aps:competences','üß© Comp√©tences & ressources','')}
            ${textarea('aps:freins','‚ö†Ô∏è Freins & vuln√©rabilit√©s','')}
          </div>
          <div class="grid cols-2" style="margin-top:1rem">
            ${textarea('aps:env','üåç Environnement & r√©seau','')}
            ${textarea('aps:mob','üöó Mobilit√© & territoire','')}
          </div>
        </div>

        ${sectionTitle('ü™∂ Synth√®se partag√©e','b-orange')}
        ${threeCols(
          textarea('aps:forces','3 forces',''),
          textarea('aps:besoins','3 besoins',''),
          textarea('aps:pistes','3 pistes d‚Äôaction','')
        )}

        ${actionsFooter(id)}
      `;
    }

    function renderAlliance(){
      const id = 'alliance';
      return `
        <section class="card">
          <h2>Carte d‚Äôalliance de travail ‚Äì CEP 2.0</h2>
          <p class="hint">Contractualiser l‚Äôalliance : objectifs, r√¥les, moyens, prochaine √©tape, √©valuation.</p>
        </section>

        ${twoCols(
          textarea('alliance:objectif','Objectif commun',''),
          textarea('alliance:moyens','Moyens mobilis√©s / partenaires','')
        )}
        ${twoCols(
          textarea('alliance:jeune','Engagement du jeune',''),
          textarea('alliance:conseiller','Engagement du conseiller','')
        )}
        ${threeCols(
          inputText('alliance:prochaine','Prochaine √©tape (date / action)',''),
          inputText('alliance:evaluation','Modalit√© d‚Äô√©valuation',''),
          inputText('alliance:signature','Signature (nom / date)','')
        )}

        ${actionsFooter(id)}
      `;
    }

    function renderSynthese(){
      const id = 'synthese';
      return `
        <section class="card">
          <h2>Synth√®se CEP 2.0 ‚Äì Bilan & projection</h2>
          <p class="hint">Diagnostic (APS), objectifs, plan d‚Äôaction, √©valuation qualitative, droit au retour.</p>
        </section>

        ${twoCols(
          textarea('synthese:diag','Diagnostic partag√© (5 points APS)',''),
          textarea('synthese:obj','Objectifs CT / MT','')
        )}
        ${sectionTitle('Plan d‚Äôaction','b-bleu')}
        ${threeCols(
          textarea('synthese:action1','Action / acteur / √©ch√©ance',''),
          textarea('synthese:action2','Action / acteur / √©ch√©ance',''),
          textarea('synthese:action3','Action / acteur / √©ch√©ance','')
        )}

        ${sectionTitle('√âvaluation qualitative (1‚Äì5)','b-vert')}
        ${threeCols(
          inputText('synthese:auto','Autonomie (1‚Äì5)',''),
          inputText('synthese:conf','Confiance (1‚Äì5)',''),
          inputText('synthese:mob','Mobilit√© (1‚Äì5)','')
        )}
        ${twoCols(
          textarea('synthese:retour','Droit au retour (modalit√©s)',''),
          textarea('synthese:notes','Observations compl√©mentaires','')
        )}

        ${actionsFooter(id)}
      `;
    }

    /* ========= Shell (onglets / routing) ========= */
    const tabs = document.getElementById('tabs');
    const view = document.getElementById('view');
    let current = localStorage.getItem('mlpb_repo_current') || 'pacea';

    function mountTabs(){
      tabs.innerHTML = PAGES.map(p => `
        <button class="tab ${current===p.id?'active':''}" onclick="go('${p.id}')">
          ${p.label}
        </button>
      `).join('');
    }
    function go(id){
      current = id; localStorage.setItem('mlpb_repo_current', id);
      mountTabs();
      const page = PAGES.find(p=>p.id===id);
      view.innerHTML = page.render();
    }

    /* ========= Actions globales ========= */
    function resetCurrent(){
      if(!confirm('R√©initialiser les champs de cette fiche ?')) return;
      state[current] = {}; saveState(); go(current);
    }
    function saveAll(){
      saveState(); alert('Donn√©es sauvegard√©es dans votre navigateur.');
    }
    function exportCurrent(id){
      const payload = JSON.stringify({[id]: state[id]||{}}, null, 2);
      download(`mlpb_${id}_${Date.now()}.json`, payload);
    }
    function exportAll(){
      const payload = JSON.stringify(state, null, 2);
      download(`mlpb_repo_${Date.now()}.json`, payload);
    }
    function download(filename, text){
      const a = document.createElement('a');
      a.href = URL.createObjectURL(new Blob([text], {type:'application/json'}));
      a.download = filename; a.click();
      URL.revokeObjectURL(a.href);
    }

    /* ========= Boot ========= */
    mountTabs(); go(current);
  </script>
</body>
</html>
